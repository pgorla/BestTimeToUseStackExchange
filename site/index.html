<!doctype html>

<html>

<head>

<meta charset="utf-8">
<script src="js/jquery.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script src="js/d3.js"></script>

<!--
<script src="js/ajax-solr/lib/core/Core.js"></script>
<script src="js/ajax-solr/lib/core/AbstractManager.js"></script>
<script src="js/ajax-solr/lib/managers/Manager.jquery.js"></script>
-->

<!--<link rel="stylesheet" type="text/css" href="css/bootstrap.css" />-->
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>

<style>



</style>

<script>

function draw(data) {
    "use strict";

    window.docs = data.response.docs;

    var margin = 50,
        width = 700 - margin,
        height = 300 - margin;

    var answer_extent = d3.extent(
        data.response.docs,
        function(d){return d.AnswerCount});

    var answer_scale = d3.scale.linear()
        .domain(answer_extent)
        .range([height, margin]);

    var time_extent = d3.extent(
        data.response.docs,
        function(d) {
            return new Date(d.CreationDate).getTime();
        });

    var time_scale = d3.time.scale()
        .domain(time_extent)
        .range([margin, width]);

    var rad_extent = d3.extent(
        data.response.docs,
        function(d) {
            return d.AnswerCount;
        });

    var rad_scale = d3.scale.linear()
        .domain(answer_extent)
        .range([5,25]);

    d3.select("body")
        .append("svg")
            .attr("width", width+margin)
            .attr("height", height+margin)
            .attr("class", "chart");

    d3.select("svg")
        .selectAll("circle")
        .data(data.response.docs)
        .enter()
        .append("circle")
            .attr("class", "main");

   d3.selectAll("circle")
        .attr("cy", function(d){return answer_scale(d.AnswerCount)})
        .attr("cx", function(d){
            return time_scale(new Date(d.CreationDate).getTime())})
        .attr("r", function(d){return rad_scale(d.AnswerCount)});

}

</script>
 

</head>

<body>

<script>

d3.json("sample.json", draw);

</script>
 
</body>
</html>

